<!DOCTYPE html>
<html>
  <head>
    <title>Creating Vega Viz</title>
    <script src="https://cdn.jsdelivr.net/npm/vega@5.9.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@4.0.2"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.2.1"></script>
  </head>
  <body>
    <p style="font-weight:bold;text-align:center;font-size:50px;">
        Interactive Vega heatmaps
    </p>
    <p style="font-weight:bold;text-align:center;font-size:15px;">
        * VisualReality *
    </p>
    <p style="font-weight:bold;text-align:center;font-size:22px;">
        The visualization presents high-dimentional data by combining heatmaps for the employment of different energy sources per country over time. 
        The graphic was made in Vega by combining the 9 interactive heatmaps into a single plot.
        By hovering over the plot, additional information will appear.
    </p>
    <hr>
    
    <div id="vis"></div>
    <script type="text/javascript">
      var yourViz = {
        "$schema": "https://vega.github.io/schema/vega/v5.json",
        "width": 300,
        "height": 300,
        "padding": 0,
        "data": [
            {
            "name": "data_coal",
            "url": "https://raw.githubusercontent.com/sybrendeboever/Datavis_data/main/data2_coal_consumption.csv",
            "format": {
                "type": "csv",
                "parse": {"country": "string", "year": "number", "continent": "string"}
            }
            },
            {
            "name": "data_gas",
            "url": "https://raw.githubusercontent.com/sybrendeboever/Datavis_data/main/data2_gas_consumption.csv",
            "format": {
                "type": "csv",
                "parse": {"country": "string", "year": "number", "continent": "string"}
            }
            },
            {
            "name": "data_hydro",
            "url": "https://raw.githubusercontent.com/sybrendeboever/Datavis_data/main/data2_hydro_consumption.csv",
            "format": {
                "type": "csv",
                "parse": {"country": "string", "year": "number", "continent": "string"}
            }
            },
            {
            "name": "data_biofuel",
            "url": "https://raw.githubusercontent.com/sybrendeboever/Datavis_data/main/data2_biofuel_consumption.csv",
            "format": {
                "type": "csv",
                "parse": {"country": "string", "year": "number", "continent": "string"}
            }
            },
            {
            "name": "data_nuclear",
            "url": "https://raw.githubusercontent.com/sybrendeboever/Datavis_data/main/data2_nuclear_consumption.csv",
            "format": {
                "type": "csv",
                "parse": {"country": "string", "year": "number", "continent": "string"}
            }
            },
            {
            "name": "data_oil",
            "url": "https://raw.githubusercontent.com/sybrendeboever/Datavis_data/main/data2_oil_consumption.csv",
            "format": {
                "type": "csv",
                "parse": {"country": "string", "year": "number", "continent": "string"}
            }
            },
            {
            "name": "data_solar",
            "url": "https://raw.githubusercontent.com/sybrendeboever/Datavis_data/main/data2_solar_consumption.csv",
            "format": {
                "type": "csv",
                "parse": {"country": "string", "year": "number", "continent": "string"}
            }
            },
            {
            "name": "data_wind",
            "url": "https://raw.githubusercontent.com/sybrendeboever/Datavis_data/main/data2_wind_consumption.csv",
            "format": {
                "type": "csv",
                "parse": {"country": "string", "year": "number", "continent": "string"}
            }
            },
            {
            "name": "data_renew",
            "url": "https://raw.githubusercontent.com/sybrendeboever/Datavis_data/main/data2_renew_consumption.csv",
            "format": {
                "type": "csv",
                "parse": {"country": "string", "year": "number", "continent": "string"}
            }
            }
        ],
        "scales": [
            {
            "name": "x",
            "type": "band",
            "domain": [
                1965,
                1966,
                1967,
                1968,
                1969,
                1970,
                1971,
                1972,
                1973,
                1974,
                1975,
                1976,
                1977,
                1978,
                1979,
                1980,
                1981,
                1982,
                1983,
                1984,
                1985,
                1986,
                1987,
                1988,
                1989,
                1990,
                1991,
                1992,
                1993,
                1994,
                1995,
                1996,
                1997,
                1998,
                1999,
                2000,
                2001,
                2002,
                2003,
                2004,
                2005,
                2006,
                2007,
                2008,
                2009,
                2010,
                2011,
                2012,
                2013,
                2014,
                2015,
                2016,
                2017,
                2018,
                2019
            ],
            "range": "width"
            },
            {
            "name": "y_coal",
            "type": "band",
            "domain": {"data": "data_coal", "field": "country"},
            "range": "height"
            },
            {
            "name": "y_gas",
            "type": "band",
            "domain": {"data": "data_coal", "field": "country"},
            "range": "height"
            },
            {
            "name": "y_hydro",
            "type": "band",
            "domain": {"data": "data_hydro", "field": "country"},
            "range": "height"
            },
            {
            "name": "y_biofuel",
            "type": "band",
            "domain": {"data": "data_biofuel", "field": "country"},
            "range": "height"
            },
            {
            "name": "y_nuclear",
            "type": "band",
            "domain": {"data": "data_nuclear", "field": "country"},
            "range": "height"
            },
            {
            "name": "y_oil",
            "type": "band",
            "domain": {"data": "data_oil", "field": "country"},
            "range": "height"
            },
            {
            "name": "y_solar",
            "type": "band",
            "domain": {"data": "data_solar", "field": "country"},
            "range": "height"
            },
            {
            "name": "y_wind",
            "type": "band",
            "domain": {"data": "data_wind", "field": "country"},
            "range": "height"
            },
            {
            "name": "y_renew",
            "type": "band",
            "domain": {"data": "data_renew", "field": "country"},
            "range": "height"
            },
            {
            "name": "color_coal",
            "type": "linear",
            "range": {"scheme": "Greys"},
            "domain": {"data": "data_coal", "field": "coal_consumption"},
            "zero": false,
            "nice": true
            },
            {
            "name": "color_gas",
            "type": "linear",
            "range": {"scheme": "yelloworangebrown"},
            "domain": {"data": "data_gas", "field": "gas_consumption"},
            "zero": false,
            "nice": true
            },
            {
            "name": "color_hydro",
            "type": "linear",
            "range": {"scheme": "lighttealblue"},
            "domain": {"data": "data_hydro", "field": "hydro_consumption"},
            "zero": false,
            "nice": true
            },
            {
            "name": "color_biofuel",
            "type": "linear",
            "range": {"scheme": "Browns"},
            "domain": {"data": "data_biofuel", "field": "biofuel_consumption"},
            "zero": false,
            "nice": true
            },
            {
            "name": "color_nuclear",
            "type": "linear",
            "range": {"scheme": "Reds"},
            "domain": {"data": "data_nuclear", "field": "nuclear_consumption"},
            "zero": false,
            "nice": true
            },
            {
            "name": "color_oil",
            "type": "linear",
            "range": {"scheme": "bluepurple"},
            "domain": {"data": "data_oil", "field": "oil_consumption"},
            "zero": false,
            "nice": true
            },
            {
            "name": "color_solar",
            "type": "linear",
            "range": {"scheme": "DarkGold"},
            "domain": {"data": "data_solar", "field": "solar_consumption"},
            "zero": false,
            "nice": true
            },
            {
            "name": "color_wind",
            "type": "linear",
            "range": {"scheme": "greenblue"},
            "domain": {"data": "data_wind", "field": "wind_consumption"},
            "zero": false,
            "nice": true
            },
            {
            "name": "color_renew",
            "type": "linear",
            "range": {"scheme": "Greens"},
            "domain": {"data": "data_renew", "field": "renew_consumption"},
            "zero": false,
            "nice": true
            }
        ],
        "layout": {"padding": 0, "columns": 3},
        "marks": [
            {
            "type": "group",
            "encode": {"update": {"width": {"value": 100}, "height": {"value": 100}}},
            "marks": [
                {
                "type": "rect",
                "from": {"data": "data_coal"},
                "encode": {
                    "enter": {
                    "x": {"scale": "x", "field": "year"},
                    "y": {"scale": "y_coal", "field": "country"},
                    "tooltip": {
                        "signal": "{title: 'Coal consumption','Country': datum.country, 'Continent': datum.continent, 'log-value': round(datum.coal_consumption*pow(10,2))/pow(10,2), 'Year': datum.year}"
                    },
                    "width": {"value": 15},
                    "height": {"scale": "y_coal", "band": 1}
                    },
                    "update": {
                    "fill": {"scale": "color_coal", "field": "coal_consumption"}
                    }
                }
                }
            ]
            },
            {
            "type": "group",
            "encode": {"update": {"width": {"value": 100}, "height": {"value": 100}}},
            "marks": [
                {
                "type": "rect",
                "from": {"data": "data_gas"},
                "encode": {
                    "enter": {
                    "x": {"scale": "x", "field": "year"},
                    "y": {"scale": "y_gas", "field": "country"},
                    "tooltip": {
                        "signal": "{title: 'Gas consumption','Country': datum.country, 'Continent': datum.continent, 'log-value': round(datum.gas_consumption*pow(10,2))/pow(10,2), 'Year': datum.year}"
                    },
                    "width": {"value": 15},
                    "height": {"scale": "y_gas", "band": 1}
                    },
                    "update": {
                    "fill": {"scale": "color_gas", "field": "gas_consumption"}
                    }
                }
                }
            ]
            },
            {
            "type": "group",
            "encode": {"update": {"width": {"value": 100}, "height": {"value": 100}}},
            "marks": [
                {
                "type": "rect",
                "from": {"data": "data_hydro"},
                "encode": {
                    "enter": {
                    "x": {"scale": "x", "field": "year"},
                    "y": {"scale": "y_hydro", "field": "country"},
                    "tooltip": {
                        "signal": "{title: 'Hydro consumption','Country': datum.country, 'Continent': datum.continent, 'log-value': round(datum.hydro_consumption*pow(10,2))/pow(10,2), 'Year': datum.year}"
                    },
                    "width": {"value": 15},
                    "height": {"scale": "y_hydro", "band": 1}
                    },
                    "update": {
                    "fill": {"scale": "color_hydro", "field": "hydro_consumption"}
                    }
                }
                }
            ]
            },
            {
            "type": "group",
            "encode": {"update": {"width": {"value": 100}, "height": {"value": 100}}},
            "marks": [
                {
                "type": "rect",
                "from": {"data": "data_biofuel"},
                "encode": {
                    "enter": {
                    "x": {"scale": "x", "field": "year"},
                    "y": {"scale": "y_biofuel", "field": "country"},
                    "tooltip": {
                        "signal": "{title: 'Biofuel consumption','Country': datum.country, 'Continent': datum.continent, 'log-value': round(datum.biofuel_consumption*pow(10,2))/pow(10,2), 'Year': datum.year}"
                    },
                    "width": {"value": 15},
                    "height": {"scale": "y_biofuel", "band": 1}
                    },
                    "update": {
                    "fill": {"scale": "color_biofuel", "field": "biofuel_consumption"}
                    }
                }
                }
            ]
            },
            {
            "type": "group",
            "encode": {"update": {"width": {"value": 100}, "height": {"value": 100}}},
            "marks": [
                {
                "type": "rect",
                "from": {"data": "data_nuclear"},
                "encode": {
                    "enter": {
                    "x": {"scale": "x", "field": "year"},
                    "y": {"scale": "y_nuclear", "field": "country"},
                    "tooltip": {
                        "signal": "{title: 'Nuclear consumption','Country': datum.country, 'Continent': datum.continent, 'log-value': round(datum.nuclear_consumption*pow(10,2))/pow(10,2), 'Year': datum.year}"
                    },
                    "width": {"value": 15},
                    "height": {"scale": "y_nuclear", "band": 1}
                    },
                    "update": {
                    "fill": {"scale": "color_nuclear", "field": "nuclear_consumption"}
                    }
                }
                }
            ]
            },
            {
            "type": "group",
            "encode": {"update": {"width": {"value": 100}, "height": {"value": 100}}},
            "marks": [
                {
                "type": "rect",
                "from": {"data": "data_oil"},
                "encode": {
                    "enter": {
                    "x": {"scale": "x", "field": "year"},
                    "y": {"scale": "y_oil", "field": "country"},
                    "tooltip": {
                        "signal": "{title: 'Oil consumption','Country': datum.country, 'Continent': datum.continent, 'log-value': round(datum.oil_consumption*pow(10,2))/pow(10,2), 'Year': datum.year}"
                    },
                    "width": {"value": 15},
                    "height": {"scale": "y_oil", "band": 1}
                    },
                    "update": {
                    "fill": {"scale": "color_oil", "field": "oil_consumption"}
                    }
                }
                }
            ]
            },
            {
            "type": "group",
            "encode": {"update": {"width": {"value": 100}, "height": {"value": 100}}},
            "marks": [
                {
                "type": "rect",
                "from": {"data": "data_solar"},
                "encode": {
                    "enter": {
                    "x": {"scale": "x", "field": "year"},
                    "y": {"scale": "y_solar", "field": "country"},
                    "tooltip": {
                        "signal": "{title: 'Solar consumption','Country': datum.country, 'Continent': datum.continent, 'log-value': round(datum.solar_consumption*pow(10,2))/pow(10,2), 'Year': datum.year}"
                    },
                    "width": {"value": 15},
                    "height": {"scale": "y_solar", "band": 1}
                    },
                    "update": {
                    "fill": {"scale": "color_solar", "field": "solar_consumption"}
                    }
                }
                }
            ]
            },
            {
            "type": "group",
            "encode": {"update": {"width": {"value": 100}, "height": {"value": 100}}},
            "marks": [
                {
                "type": "rect",
                "from": {"data": "data_wind"},
                "encode": {
                    "enter": {
                    "x": {"scale": "x", "field": "year"},
                    "y": {"scale": "y_wind", "field": "country"},
                    "tooltip": {
                        "signal": "{title: 'Wind consumption','Country': datum.country, 'Continent': datum.continent, 'log-value': round(datum.wind_consumption*pow(10,2))/pow(10,2), 'Year': datum.year}"
                    },
                    "width": {"value": 15},
                    "height": {"scale": "y_wind", "band": 1}
                    },
                    "update": {
                    "fill": {"scale": "color_wind", "field": "wind_consumption"}
                    }
                }
                }
            ]
            },
            {
            "type": "group",
            "encode": {"update": {"width": {"value": 100}, "height": {"value": 100}}},
            "marks": [
                {
                "type": "rect",
                "from": {"data": "data_renew"},
                "encode": {
                    "enter": {
                    "x": {"scale": "x", "field": "year"},
                    "y": {"scale": "y_renew", "field": "country"},
                    "tooltip": {
                        "signal": "{title: 'Renewables consumption','Country': datum.country, 'Continent': datum.continent, 'log-value': round(datum.renew_consumption*pow(10,2))/pow(10,2), 'Year': datum.year}"
                    },
                    "width": {"value": 15},
                    "height": {"scale": "y_renew", "band": 1}
                    },
                    "update": {
                    "fill": {"scale": "color_renew", "field": "renew_consumption"}
                    }
                }
                }
            ]
            }
        ]
      };
      vegaEmbed('#vis', yourViz);
    </script>
  </body>
</html>
